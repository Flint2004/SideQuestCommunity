/* uni.scss */

// Color Palette
$primary: #60BB7D;
$primary-dark: #3D8C57;
$accent-red: #FF2442;
$bg-main: #F4F6F5;
$bg-main-dark: #0A0A0A;
$surface: #FFFFFF;
$surface-dark: #1A1A1A;
$text-main: #000000;
$text-main-dark: #FFFFFF;
$border-color: #000000;
$border-color-dark: #333333;

$brutal-border-width: 4rpx;
$brutal-radius: 24rpx;
$brutal-shadow: 6rpx 6rpx 0px 0px #000000;
$brutal-shadow-active: 2rpx 2rpx 0px 0px #000000;

:root {
  --primary: #{$primary};
  --accent-red: #{$accent-red};
  --bg-main: #{$bg-main};
  --surface: #{$surface};
  --text-main: #{$text-main};
  --border-color: #{$border-color};
  --shadow-color: #000000;
  --brutal-shadow: #{$brutal-shadow};
  --brutal-shadow-active: #{$brutal-shadow-active};
}

.dark {
  --primary: #{$primary-dark};
  --bg-main: #{$bg-main-dark};
  --surface: #{$surface-dark};
  --text-main: #{$text-main-dark};
  --border-color: #{$border-color-dark};
  --shadow-color: #000000;
  --brutal-shadow: 6rpx 6rpx 0px 0px #000000;
  --brutal-shadow-active: 2rpx 2rpx 0px 0px #000000;

  view, text, span, label, input, textarea, scroll-view {
    color: var(--text-main) !important;
  }

  // 排除：特殊绿色背景下的文字强制保持白字
  .primary, 
  .primary view, 
  .primary text,
  .publish-btn,
  .red-dot,
  .badge {
    color: #FFFFFF !important;
  }

  // 修复图标颜色
  svg, polyline, line, circle, path, rect {
    &[stroke="#000"], &[stroke="#000000"], &[stroke="currentColor"] {
      stroke: var(--text-main) !important;
    }
    &[fill="#000"], &[fill="#000000"] {
      fill: var(--text-main) !important;
    }
  }

  // 修复 Swiper 指示点
  .uni-swiper-dot { background: rgba(255, 255, 255, 0.3) !important; }
  .uni-swiper-dot-active { background: #FFFFFF !important; }
}

body {
  font-family: "Inter", "PingFang SC", "Microsoft YaHei", sans-serif;
  background-color: var(--bg-main);
  color: var(--text-main);
}

.brutal-card {
  background-color: var(--surface);
  border: $brutal-border-width solid var(--border-color);
  box-shadow: var(--brutal-shadow);
  border-radius: $brutal-radius;
  overflow: hidden;
  transition: transform 0.1s ease, box-shadow 0.1s ease;
  &:active { transform: translate(2rpx, 2rpx); box-shadow: var(--brutal-shadow-active); }
}

.brutal-btn {
  background-color: var(--surface);
  border: $brutal-border-width solid var(--border-color);
  box-shadow: var(--brutal-shadow);
  border-radius: $brutal-radius;
  display: flex; align-items: center; justify-content: center;
  font-weight: 800; color: var(--text-main);
  &:active { transform: translate(2rpx, 2rpx); box-shadow: var(--brutal-shadow-active); }
  &.primary { background-color: var(--primary); color: #fff !important; }
}

.safe-area-bottom { padding-bottom: constant(safe-area-inset-bottom); padding-bottom: env(safe-area-inset-bottom); }
